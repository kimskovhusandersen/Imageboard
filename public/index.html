<!doctype html>
<html>

<head>
    <title>Project Imageboard</title>
    <link rel="stylesheet" href="/css/master.css">
</head>

<body>
    <section id="page">

        <header id="header">
            <h3>{{title}}</h3>
        </header>
        <nav>
            <label for="username">Username:</label>
            <input id="username" v-model="username" type="text" name="username">
            <label for="title">Title:</label>
            <input id="title" v-model="title" type="text" name="title">
            <label for="desc">Description:</label>
            <input id="desc" v-model="desc" type="text" name="description">
            <label for="file">File:</label>
            <input id="file" type="file" accept="image/*" v-on:change="fileSelected">
            <label for="tags">Tags:</label>
            <input id="tags" v-model="tags" type="text" name="tags">
            <button @click="upload" type="submit" name="upload-btn">Upload</button>
        </nav>
        <main id="main">
            <div class="card" v-for="image in images">
                <a :href="'#'+image.id">
                    <img @click="image = image" v-bind:src='image.url' />
                </a>
                <div class="card-body">
                    <h5 class="card-title">{{image.title}}</h5>
                    <!-- <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
                        <a href="#" class="btn btn-primary">Go somewhere</a> -->
                </div>
            </div>
            <button class="more-button" v-bind:class="{ on: isNotLastImage}" @click="getMoreImages" type="submit" name="more-btn">More</button>
        </main>

        <image-component @close-image-modal="closeImage" v-bind:selected-image="selectedImage" v-if="selectedImage"></image-component>
        <!-- <p @click="selectedFruit = fruit.id" class="fruit" v-for="fruit in fruits" v-if="fruits.length">{{fruit.title}}</p> -->


        <footer id="footer">Footer</footer>
    </section>

    <!-- Image template -->
    <script type="text/x-template" id="image-template">
        <div class="image-component">
            <header>
                <a :href="'#'+image.prev_id">
                    Prev
                </a>
                <button type="button" @click="closeImage" class="close-btn">
                    <span>&nbsp;</span>
                    <span>&nbsp;</span>
                </button>
                <a :href="'#'+image.next_id">
                    Next
                </a>

            </header>
            <main>
                <!-- <section>
                    <canvas id="canvas" width="400px" height="200px"/>
                </section> -->
                <section>
                    <div class="row">
                        <h1>{{image.title}}</h1>
                        <img v-bind:src='image.url' />
                        <p>{{image.description}}</p>
                        <p>{{image.username}}</p>
                    </div>
                </section>
                <section>
                    <div class="row">
                        <image-tags-component @contact-chicken="closeImage" v-bind:selected-image="selectedImage" v-if="selectedImage"></image-tags-component>
                    </div>
                </section>
                <section>
                    <div class="row">
                        <h3>New comment:</h3>
                        <label for="username">Username:</label>
                        <input id="username" v-model="username" type="text" name="username">
                        <label for="comment">Comment:</label>
                        <input id="comment" v-model="comment" type="text" name="comment">
                        <input id="image_id" v-model="imageId" type="hidden" name="imageId">
                        <button @click="submitComment" type="submit" name="button">Submit</button>
                    </div>
                </section>
                <section>
                    <div class="row">
                        <h3>Comments</h3>
                        <div class="comment" v-for="comment in comments">
                            <div class="comment-body">
                                <h5 class="comment-title">Username: {{comment.username}}</h5>
                                <p class="comment-text">Comment: {{comment.comment}}</p>
                                    <!-- <a href="#" class="btn btn-primary">Go somewhere</a> -->
                            </div>
                        </div>
                    </div>

                </section>
            </main>
        </div>
    </script>

    <!-- Tags-template -->
    <script type="text/x-template" id="image-tags-template">
        <div class="image-tags-component">
            <section>
                <div class="row">
                    <h3>Add a Tag to image:</h3>
                    <label for="formTags">Tags (separated with ","):</label>
                    <input id="formTags" v-model="formTags" type="text" name="formTags">
                    <input id="image_id" v-model="imageId" type="hidden" name="imageId">
                    <button @click="submitTags" type="submit" name="button">Submit</button>
                </div>
            </section>
            <section>
                <div class="row">
                    <h3>Tags</h3>

                    <div v-for="imageTag in imageTags">
                        <button @click="clickTag(imageTag.tag_id)">{{imageTag.tag}}</button>
                    </div>
                </div>
            </section>
        </div>
    </script>

    <script src="/js/vue.js"></script>
    <script src="/js/axios.min.js"></script>
    <script src="/js/script.js"></script>
</body>

</html>